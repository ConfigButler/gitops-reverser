apiVersion: configbutler.ai/v1alpha1
kind: GitTarget
metadata:
  name: {{ .Name }}
  namespace: {{ .Namespace }}
spec:
  providerRef:
    kind: GitProvider
    name: {{ .ProviderName }}
  branch: {{ .Branch }}
  path: {{ .Path }}
  encryption:
    provider: sops
    age:
      enabled: true
      recipients:
        extractFromSecret: true
{{- if .GenerateWhenMissing }}
        generateWhenMissing: true
{{- end }}
    secretRef:
      name: {{ .EncryptionSecretName }}
